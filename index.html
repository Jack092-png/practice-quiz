<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <!-- Viewport meta tag for proper scaling on mobile devices -->
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <!-- Prevent caching -->
  <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
  <meta http-equiv="Pragma" content="no-cache" />
  <meta http-equiv="Expires" content="0" />
  <title>Ethics & Philosophy Quiz</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <h1>Ethics & Philosophy Quiz</h1>
  <form id="quizForm" onsubmit="return false;" autocomplete="off">
    <!-- Questions will be inserted here by JavaScript -->
  </form>
  <button type="button" onclick="submitQuiz()">Submit</button>
  <button type="button" onclick="resetQuiz()">Reset</button>
  <div id="score"></div>

  <script>
     const questions = [
    {"question": "Linear Function (Equation: y = 2x - 3)", "answer": "Straight line"},
  {"question": "Quadratic Function (Equation: y = 1/2x^2 - 4)", "answer": "Parabola"},
  {"question": "Rational Function (Equation: y = (x + 3)/(x - 2))", "answer": "Hyperbola"},
  {"question": "Logarithmic Function (Equation: y = log x)", "answer": "Logarithmic curve"},
  {"question": "A relation is a set of ordered pairs.", "answer": "relation"},
  {"question": "The domain of a relation is the set of all first coordinates (x-coordinates) from the ordered pairs.", "answer": "domain"},
  {"question": "The range of a relation is the set of all second coordinates (y-coordinates) from the ordered pairs.", "answer": "range"},
  {"question": "The graph of a relation is the set of points in the coordinate plane corresponding to the ordered pairs in the relation.", "answer": "graph"}
    ];
    const quizForm = document.getElementById('quizForm');

    function shuffleArray(array) {
      for (let i = array.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]];
      }
    }

    function renderQuiz() {
      shuffleArray(questions); // Shuffle the questions array

      questions.forEach((q, index) => {
        const questionDiv = document.createElement('div');
        questionDiv.className = 'question';
        questionDiv.innerHTML = `<p>${index + 1}. ${q.question}</p>`;

        // Create an input field for each answer part.
        const answers = q.answer.split(',').map(answer => answer.trim());
        answers.forEach((_, ansIndex) => {
          questionDiv.innerHTML += `
            <input type="text" name="question${index}answer${ansIndex}" class="answerInput" autocomplete="off" required>
          `;
        });

        questionDiv.innerHTML += `<p class="correctAnswer" style="display: none;">Correct answer: ${q.answer}</p>`;
        quizForm.appendChild(questionDiv);
      });
    }

    function submitQuiz() {
      let score = 0;
      const correctAnswers = document.querySelectorAll('.correctAnswer');

      questions.forEach((q, index) => {
        const answers = q.answer.split(',').map(answer => answer.trim());
        const userAnswers = answers.map((_, ansIndex) => {
          const input = document.querySelector(`input[name="question${index}answer${ansIndex}"]`);
          return input ? input.value.trim().toLowerCase() : "";
        });

        // Only check answers if every input has a value.
        if (userAnswers.some(answer => answer === "")) {
          correctAnswers[index].style.display = 'none';
        } else {
          const isCorrect = userAnswers.every((userAnswer, i) => {
            // For slash-separated alternatives, split the expected answer further.
            const correctPart = answers[i].toLowerCase();
            const alternatives = correctPart.split('/').map(alt => alt.trim());
            return alternatives.includes(userAnswer);
          });
          if (isCorrect) {
            score++;
            correctAnswers[index].style.display = 'none';
          } else {
            correctAnswers[index].style.display = 'block';
          }
        }
      });

      document.getElementById('score').innerText = `Your score is ${score} out of ${questions.length}`;
    }

    function resetQuiz() {
      const answerInputs = document.querySelectorAll('.answerInput');
      const correctAnswers = document.querySelectorAll('.correctAnswer');
      answerInputs.forEach(input => input.value = '');
      correctAnswers.forEach(answer => answer.style.display = 'none');
      document.getElementById('score').innerText = '';
    }

    // Initialize the quiz
    renderQuiz();
  </script>
</body>
</html>
